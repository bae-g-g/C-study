# ②   Synchronous  동기   +   Non-Blocking  논블로킹

# **② Synchronous 동기 + Non-Blocking 논블로킹**

Read/Write (어플리케이션이 Non-Blocking 설정된 커널에 Read or Write 시스템콜 요청)
파일 1개를 Read or Write 실행 완료전 ➝ 다음 동작 실행
파일 1개를 Read or Write 실행 완료전 ➝ 다음 동작 실행
. 완료전 까지 어플리케이션이 멈춰 있지 않음
. 커널이 제어권을 어플리케이션에 돌려주어 어플리케이션이 멈춰 있지 않음
. 어플리케이션이 제어권을 가지고 있음
. 커널이 제어권을 가지고 있지 않음
※ Indeed, 어플리케이션이 커널에 제어권을 잠시 넘겨주고 바로 돌려받음
※ Indeed, 동기 + 논블로킹 = 동기 + 블로킹의 변형 = 동기 + 짧은 주기의 블로킹

*   **Operation 동작**

E.g) Read

![](https://t9003081320.p.clickup-attachments.com/t9003081320/72034d56-e75a-4ee3-88a5-035ccb1a0151/image.png)

ⓐ 어플리케이션에서 커널에 System Call

Read 실행 시작 = 어플리케이션에서 커널에 파일 읽기 완료 확인 첫요청

ⓑ 어플리케이션 Block (멈춰 있음 + 제어권 없음)

어플리케이션에서 커널로 제어권 넘어옴

커널에서 Read 시작 + 제어권 있음

ⓒ 커넬에서 어플리케이션에 미완료 응답

파일읽기 완료 못함

커넬에서 어플리케이션으로 제어권 넘어옴

어플리케이션 작동 + 제어권 있음

.

. ⓐⓑⓒ 반복
.

ⓓ 커넬에서 파일 읽기 완료
커널에 제어권이랑 상관 없음
제어권은 여전히 어플리케이션에 있음

ⓐ 어플리케이션에서 커널에 파일 읽기 완료 확인 재요청

ⓑ 어플리케이션 Block (멈춰 있음 + 제어권 없음)

어플리케이션에서 커널로 제어권 넘어옴

커널에서 Read 시작 + 제어권 있음

ⓔ 커넬에서 어플리케이션에 완료 응답

파일읽기 완료

커넬에서 어플리케이션으로 제어권 넘어옴

어플리케이션 작동 + 제어권 있음

*   **Feature 특징**

논블로킹

파일 읽기 or 쓰기가 한번에 바로 완료되지 않을수 있음을 의미
대부분의 경우 커널에서 파일 읽기 or 쓰기 완료될때 까지 (ⓐ ~ ⓔ 과정)
어플리케이션이
⑴ Latency 지연시간이 발생
⑵ Busy-Wait을 해야함
⑶ 다음 동작 (e.g. 어플리케이션에서 커넬에 New System Call)을 시도할수 있음

∴ 논블로킹은 굉장히 비효율적 일수 있음

**※ Latency**
파일 읽기 or 쓰기 완료후, 데이터 전달될때 까지 (ⓓ ~ ⓔ)
어플리케이션이 파일 읽기 or 쓰기가 완료 되었음을 알기 까지 (ⓓ ~ ⓔ)
Latency 지연시간 (ⓓ ~ ⓔ)가 발생
Latency 지연시간으로 인해 커널에서 처리할수 있는 최대 데이터양이 줄어들수 있음
\= ⓓ ~ ⓔ 과정중 커널에 동작하고 있는 부분 ⓑ
\= ⓓ 커널 제어권과 상관 없음
제어권은 여전히 어플리케이션에 있음
동기 + 블로킹
ⓓ 커널에서 파일 읽기 완료후, ⓒ 바로 어플리케이션에 응답
➝ Latency 지연시간 거의 없음
동기 + 논블로킹
ⓓ 커널에서 파일 읽기 완료후, ⓐ 어플리케이션에서 요청을 했을때 ⓔ 그때 응답
\= Latency 지연시간 발생

**※ Busy-Wait**
실행 #1과 실행 #2가 같은 Resource 자원을 사용할때 ( ≒ 동일 Global Variable 사용)
실행 #1이 완료되지 않으면 (= 실행 #1의 Resource 자원에 대한 처리가 완료되지 않으면)
실행 #2는 실행될수 없음 (∵ 실행 #1과 동일 Resource 자원 사용)
![](https://t9003081320.p.clickup-attachments.com/t9003081320/8a197601-5b65-40aa-af7e-d17e78740c67/Picture6.png)
실행 #1 Resource 자원을 사용중에
실행 #2는 기다리면서 실행 #1이 Resource 자원 처리를 완료하는지 Check

#### **Example)**

**snb\_1.c**

**snb\_2.c**